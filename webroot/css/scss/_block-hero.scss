@use "queries" as *;

@layer blocks {
  .page-hero {
    position: relative;
    overflow: clip;
    background: var(--color-surface-footer);
    color: var(--color-ink-on-dark);
    padding-top: calc(var(--hero-vspace) + var(--nav-offset));
    padding-bottom: var(--hero-vspace);
    min-height: clamp(220px, 28vw, 350px);
    display: grid;
    align-items: center;
  }

  .page-hero__media,
  .page-hero__overlay,
  .page-hero__bg {
    position: absolute;
    inset: 0;
  }

  .page-hero__media img,
  .page-hero__media picture {
    inline-size: 100%;
    block-size: 100%;
    object-fit: cover;
  }

  .page-hero__overlay {
    background: linear-gradient(
      120deg,
      rgb(var(--color-hero-overlay-start-rgb) / 0.55) 0%,
      rgb(var(--color-hero-overlay-end-rgb) / 0.72) 100%
    );
  }

  /* Homepage masthead overlay layer (rendered as .page-hero__bg in template). */
  .page-hero__bg {
    z-index: 1;
    pointer-events: none;
    background: linear-gradient(
      180deg,
      rgb(var(--color-ink-absolute-rgb) / 0.78) 0%,
      rgb(var(--color-ink-absolute-rgb) / 0.58) 45%,
      rgb(var(--color-ink-absolute-rgb) / 0.80) 100%
    );
  }

  .page-hero__inner {
    position: relative;
    z-index: 2;
    width: min(var(--hero-max), calc(100% - (var(--hero-inline) * 2)));
    margin-inline: auto;
    display: grid;
    gap: var(--space-sm);
    grid-template-columns: 1fr;
  }

  .page-hero__title {
    margin: 0;
    color: var(--color-ink-on-dark);
    font-size: clamp(2rem, 1.6rem + 2.2vw, 3.2rem);
    letter-spacing: 0.01em;
    max-width: 24ch;
  }

  .page-hero__eyebrow,
  .page-hero__meta {
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    font-size: var(--step--1);
    color: rgb(var(--white-rgb) / var(--alpha-85));
  }

  .page-hero__summary {
    max-width: 62ch;
    color: rgb(var(--white-rgb) / var(--alpha-95));
  }

  .page-hero__summary > :first-child {
    margin-top: 0;
  }

  .page-hero__summary > :last-child {
    margin-bottom: 0;
  }

  .page-hero__actions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
  }

  .page-hero__image-bg {
    position: absolute;
    inset: 0;
    z-index: 0;
    overflow: hidden;
  }

  .page-hero__image-bg picture,
  .page-hero__image-bg img {
    inline-size: 100%;
    block-size: 100%;
    display: block;
    object-fit: cover;
    object-position: center center;
  }

  .page-hero__content {
    max-width: min(60ch, 100%);
  }

  .page-hero--home,
  .page-hero--single {
    isolation: isolate;
  }

  .page-hero--single {
    min-height: 350px;
    padding-top: calc(var(--hero-vspace) + var(--nav-offset));
  }

  .page-hero--single .page-hero__inner {
    justify-items: center;
    text-align: center;
  }

  .page-hero--single .page-hero__content {
    max-width: min(76rem, 100%);
    display: grid;
    gap: var(--space-sm);
    justify-items: center;
  }

  .page-hero--single .page-hero__title {
    font-size: clamp(2.5rem, 1.18rem + 3.55vw, 5rem);
    line-height: 1.125;
    font-weight: var(--font-weight-extrabold);
    letter-spacing: 0;
    text-shadow: 0 4px 4px rgb(0 0 0 / var(--alpha-25));
    max-width: min(1216px, 100%);
  }

  .page-hero--single .page-hero__summary {
    max-width: 40ch;
    margin-inline: auto;
  }

  .page-hero--single .page-hero__actions {
    justify-content: center;
  }

  .page-hero--single .page-hero__bg {
    background: rgb(var(--color-ink-absolute-rgb) / 0.68);
  }

  @include vp-max($vp-md - 0.01rem) {
    .page-hero {
      padding-top: calc(var(--nav-offset) + var(--space-sm));
      padding-bottom: var(--space-lg);
      min-height: clamp(180px, 42vw, 280px);
    }

    .page-hero__title {
      font-size: clamp(1.75rem, 1.4rem + 3vw, 2.4rem);
    }

    .page-hero--single {
      min-height: clamp(220px, 38vw, 300px);
    }

    .page-hero--single .page-hero__title {
      font-size: clamp(2rem, 7vw, 3rem);
      white-space: normal;
    }
  }
}


