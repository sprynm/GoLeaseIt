@use "queries" as *;

@layer blocks {
  .sg-guide {
    background-color: #d0d3d7;
    background-image:
      radial-gradient(rgb(var(--white-rgb) / 0.2) 0.7px, transparent 0.7px),
      radial-gradient(rgb(var(--color-ink-absolute-rgb) / 0.08) 0.7px, transparent 0.7px),
      linear-gradient(180deg, #d8dbe0 0%, #c8ccd1 100%);
    background-size: 3px 3px, 4px 4px, 100% 100%;
    background-position: 0 0, 1px 1px, 0 0;
    color: var(--color-ink-primary);
    font-family: var(--font-sans-alt);
  }

  .sg-guide a {
    text-decoration-thickness: 0.08em;
  }

  .sg-guide__masthead {
    background: rgb(var(--white-rgb) / 0.38);
    backdrop-filter: blur(2px);
    border-bottom: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
  }

  .sg-guide__kicker {
    margin: 0;
    font-size: var(--step--1);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--color-ink-meta);
    font-weight: var(--font-weight-bold);
  }

  .sg-guide__title {
    margin: 0;
    color: var(--color-brand-primary);
  }

  .sg-guide__lede {
    margin: 0;
    max-width: 70ch;
  }

  .sg-guide__nav {
    display: grid;
    gap: var(--space-sm);
  }

  .sg-guide__nav-group {
    display: grid;
    gap: var(--space-2xs);
  }

  .sg-guide__nav-label {
    margin: 0;
    font-size: 0.74rem;
    letter-spacing: 0.09em;
    text-transform: uppercase;
    font-weight: var(--font-weight-bold);
    color: var(--color-ink-meta);
  }

  .sg-guide__index {
    margin: 0;
    padding: 0;
    list-style: none;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(13.5rem, 1fr));
    gap: 0.45rem;
  }

  .sg-guide__index a {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    min-height: 2.3rem;
    padding: 0.45rem 0.7rem;
    border-radius: 4px;
    border: 1px solid rgb(var(--color-brand-primary-rgb) / var(--alpha-16));
    background: rgb(var(--white-rgb) / 0.74);
    color: var(--color-brand-primary);
    text-decoration: none;
    font-size: 0.88rem;
    line-height: 1.2;
    font-weight: var(--font-weight-medium);
  }

  .sg-guide__index a:hover,
  .sg-guide__index a:focus-visible {
    background: rgb(var(--color-brand-primary-rgb) / var(--alpha-10));
    border-color: rgb(var(--color-brand-primary-rgb) / var(--alpha-25));
    color: var(--color-brand-secondary);
  }

  .sg-guide__index--tools a {
    border-color: rgb(var(--color-ink-absolute-rgb) / var(--alpha-16));
    background: rgb(var(--white-rgb) / 0.58);
    color: var(--color-ink-primary);
  }

  .sg-guide__index--tools a:hover,
  .sg-guide__index--tools a:focus-visible {
    border-color: rgb(var(--color-brand-primary-rgb) / var(--alpha-25));
    background: rgb(var(--color-brand-primary-rgb) / var(--alpha-10));
    color: var(--color-brand-secondary);
  }

  .sg-guide__section {
    border-top: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
  }

  .sg-guide__section-head {
    margin: 0;
    font-size: var(--step-3);
  }

  .sg-guide__section-note {
    margin: 0;
    color: var(--color-ink-muted);
    max-width: 75ch;
  }

  .sg-card {
    border: 0;
    border-radius: 0;
    background: var(--color-surface-base);
    box-shadow: none;
    padding: var(--space-md);
    min-width: 0;
  }

  .sg-card > h3:first-child {
    margin: 0 0 var(--space-2xs);
    color: var(--color-brand-primary);
  }

  .sg-card > :last-child {
    margin-bottom: 0;
  }

  .sg-chip-row {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-xs);
  }

  .sg-chip {
    display: inline-flex;
    align-items: center;
    min-height: 2rem;
    padding-inline: 0.65rem;
    border-radius: var(--radius-max);
    background: var(--color-surface-soft);
    border: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
    font-size: var(--step--1);
    color: var(--color-ink-muted);
  }

  .sg-swatch-grid {
    display: grid;
    gap: var(--space-sm);
    grid-template-columns: repeat(auto-fit, minmax(11rem, 1fr));
  }

  .sg-swatch {
    border: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
    border-radius: var(--radius-sm);
    overflow: hidden;
    background: var(--color-surface-base);
  }

  .sg-swatch__paint {
    block-size: 4rem;
  }

  .sg-swatch__meta {
    padding: var(--space-xs);
    font-size: var(--step--1);
    color: var(--color-ink-muted);
    border-top: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
  }

  .sg-slice-grid {
    display: grid;
    gap: var(--space-md);
  }

  .sg-slice {
    margin: 0;
    border-radius: var(--radius-md);
    overflow: hidden;
    border: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
    background: var(--color-surface-base);
    box-shadow: var(--shadow-sm);
  }

  .sg-slice img {
    display: block;
    width: 100%;
    height: auto;
  }

  .sg-slice figcaption {
    padding: var(--space-sm) var(--space-md);
    font-size: var(--step--1);
    color: var(--color-ink-meta);
    background: var(--color-surface-base);
  }

  @include cq-min($cq-c2) {
    .sg-slice-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  .sg-demo-box {
    min-block-size: 5rem;
    border-radius: var(--radius-sm);
    border: 1px dashed rgb(var(--color-brand-primary-rgb) / var(--alpha-35));
    background: rgb(var(--color-brand-primary-rgb) / var(--alpha-04));
    color: var(--color-brand-primary);
    display: grid;
    place-items: center;
    font-size: var(--step--1);
    font-weight: var(--font-weight-semibold);
    text-align: center;
    padding: var(--space-sm);
  }

  .sg-container-demo {
    border-radius: var(--radius-md);
    border: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
    background: var(--color-surface-base);
    box-shadow: var(--shadow-sm);
    padding-block: var(--space-sm);
  }

  .sg-container-demo .c-container > * {
    padding: var(--space-sm);
    border-radius: var(--radius-sm);
    background: rgb(var(--color-brand-primary-rgb) / var(--alpha-10));
    color: var(--color-brand-primary);
    font-size: var(--step--1);
  }

  .sg-component-row {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    align-items: center;
  }

  .sg-btn-state-grid {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    align-items: flex-start;
  }

  .sg-btn-state-item {
    display: grid;
    justify-items: center;
    gap: 0.3rem;
  }

  .sg-btn-state-item__note {
    margin: 0;
    font-size: var(--step--1);
    color: var(--color-ink-meta);
    letter-spacing: 0.02em;
  }

  /* Style-guide-only display helpers for button parity demos. */
  .sg-btn-parity-navy {
    background: #172b61;
    border-color: #172b61;
    color: var(--color-ink-on-dark);
  }

  .sg-btn-parity-navy:hover,
  .sg-btn-parity-navy:focus-visible {
    background: color-mix(in srgb, #172b61 88%, var(--color-ink-absolute) 12%);
    border-color: color-mix(in srgb, #172b61 88%, var(--color-ink-absolute) 12%);
    color: var(--color-ink-on-dark);
  }

  .sg-btn-parity-blue {
    background: #3d6cae;
    border-color: #3d6cae;
    color: var(--color-ink-on-dark);
  }

  .sg-btn-parity-blue:hover,
  .sg-btn-parity-blue:focus-visible {
    background: color-mix(in srgb, #3d6cae 88%, var(--color-ink-absolute) 12%);
    border-color: color-mix(in srgb, #3d6cae 88%, var(--color-ink-absolute) 12%);
    color: var(--color-ink-on-dark);
  }

  .sg-btn-state-hover {
    background: color-mix(in srgb, var(--color-brand-punch) 88%, var(--color-ink-absolute) 12%);
    border-color: color-mix(in srgb, var(--color-brand-punch) 88%, var(--color-ink-absolute) 12%);
    box-shadow: var(--shadow-sm);
    color: var(--color-ink-on-dark);
  }

  .sg-btn-state-active {
    background: color-mix(in srgb, var(--color-brand-punch) 78%, var(--color-ink-absolute) 22%);
    border-color: color-mix(in srgb, var(--color-brand-punch) 78%, var(--color-ink-absolute) 22%);
    color: var(--color-ink-on-dark);
  }

  .sg-type-grid {
    display: grid;
    gap: var(--space-lg);
    grid-template-columns: repeat(auto-fit, minmax(18rem, 1fr));
    align-items: start;
  }

  .sg-type-spec {
    display: grid;
    gap: var(--space-lg);
    grid-template-columns: minmax(0, 1fr);
    font-family: var(--font-sans-alt);
  }

  .sg-type-spec__left {
    display: grid;
    gap: clamp(0.75rem, 1vw, 1.1rem);
    align-content: start;
  }

  .sg-type-spec__split {
    display: grid;
    gap: clamp(0.75rem, 1vw, 1.2rem);
    grid-template-columns: repeat(2, minmax(0, 1fr));
    align-items: start;
  }

  .sg-type-spec__right {
    display: grid;
    gap: var(--space-md);
    align-content: start;
    color: #10192f;
  }

  .sg-type-spec__label {
    margin: 0;
    color: var(--color-brand-primary);
    font-weight: 700;
    line-height: 1.15;
  }

  .sg-type-spec__label--h1 { font-size: clamp(2.6rem, 2rem + 2.4vw, 4.6rem); }
  .sg-type-spec__label--h2 { font-size: clamp(2rem, 1.6rem + 1.6vw, 3.25rem); }
  .sg-type-spec__label--h3 {
    font-size: clamp(1.6rem, 1.3rem + 1vw, 2.3rem);
    color: var(--color-brand-punch);
    font-weight: 600;
  }
  .sg-type-spec__label--h4 {
    font-size: clamp(1.35rem, 1.18rem + 0.5vw, 1.75rem);
    color: #10192f;
    font-weight: 700;
  }
  .sg-type-spec__label--feature-h2 { font-size: clamp(2rem, 1.6rem + 1.6vw, 3.2rem); }
  .sg-type-spec__label--feature-h3 {
    font-size: clamp(1.6rem, 1.35rem + 0.9vw, 2.2rem);
    color: #10192f;
    font-weight: 700;
  }
  .sg-type-spec__label--nav {
    font-size: clamp(1.1rem, 1rem + 0.35vw, 1.35rem);
    color: #1e3568;
    font-weight: 700;
  }

  .sg-type-spec__title {
    margin: 0;
    color: #1e3568;
    font-weight: 700;
    font-size: clamp(1.1rem, 0.98rem + 0.4vw, 1.38rem);
  }

  .sg-type-spec__text {
    margin: 0;
    color: #10192f;
    font-size: clamp(1.6rem, 1.45rem + 0.35vw, 1.95rem);
    line-height: 1.45;
  }

  @include vp-min($vp-lg) {
    .sg-type-spec {
      grid-template-columns: minmax(0, 1.05fr) minmax(0, 1.45fr);
      gap: var(--space-xl);
    }
  }

  .sg-figma-stack {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .sg-figma-label {
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .sg-form-grid {
    display: grid;
    gap: var(--space-sm);
    grid-template-columns: repeat(auto-fit, minmax(14rem, 1fr));
  }

  .sg-font-sheet {
    display: grid;
    gap: var(--space-sm);
    grid-template-columns: minmax(0, 1fr);
  }

  .sg-font-sheet__label {
    margin: 0;
    font-size: var(--step--1);
    font-weight: var(--font-weight-bold);
    color: var(--color-ink-muted);
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .sg-font-sheet input,
  .sg-font-sheet select {
    min-height: 2.6rem;
    padding-inline: 0.75rem;
    border-radius: var(--radius-sm);
    border: 1px solid var(--color-border-muted);
    background: var(--color-surface-base);
    color: var(--color-ink-primary);
    font-size: var(--step--1);
  }

  .sg-font-sheet__row {
    display: grid;
    gap: var(--space-2xs);
  }

  .sg-font-sheet__actions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-xs);
    align-items: center;
  }

  .sg-font-sheet__fieldset {
    display: grid;
    gap: var(--space-2xs);
    border: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
    border-radius: var(--radius-sm);
    padding: var(--space-xs);
    margin: 0;
  }

  .sg-font-sheet__check {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    font-size: var(--step--1);
    color: var(--color-ink-muted);
  }

  .sg-font-sheet__status {
    margin: 0;
    font-size: var(--step--1);
    color: var(--color-ink-meta);
  }

  .sg-font-sheet__output {
    display: grid;
    gap: var(--space-sm);
    margin-top: var(--space-md);
  }

  .sg-font-sheet__controls {
    display: grid;
    gap: var(--space-sm);
  }

  .sg-font-sheet textarea {
    min-height: 6rem;
    padding: var(--space-xs);
    border-radius: var(--radius-sm);
    border: 1px solid var(--color-border-muted);
    background: var(--color-surface-base);
    color: var(--color-ink-primary);
    font-size: var(--step--1);
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  }

  #sg-font-unicodes {
    min-height: 4.5rem;
  }

  .sg-font-sheet__meta {
    font-size: var(--step--1);
    color: var(--color-ink-muted);
  }

  .sg-font-sheet__grid {
    --font-sheet-family: var(--font-sans);
    display: grid;
    gap: var(--space-xs);
    grid-template-columns: repeat(auto-fit, minmax(5rem, 1fr));
  }

  .sg-font-sheet__cell {
    border: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
    border-radius: var(--radius-sm);
    background: var(--color-surface-base);
    padding: var(--space-xs);
    min-block-size: 4.5rem;
    display: grid;
    align-content: center;
    justify-items: center;
    gap: 0.25rem;
  }

  .sg-font-sheet__glyph {
    font-family: var(--font-sheet-family);
    font-size: clamp(1.75rem, 1.2rem + 1.2vw, 2.4rem);
    line-height: 1;
  }

  .sg-font-sheet__code {
    font-size: 0.72rem;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    color: var(--color-ink-meta);
  }

  .sg-legal-preview .legal-notice {
    position: static;
    inset: auto;
    padding: 0;
    pointer-events: auto;
  }

  .sg-legal-preview .legal-notice__panel {
    box-shadow: none;
  }

  .sg-code {
    display: inline-block;
    border-radius: var(--radius-xs);
    background: rgb(var(--color-brand-primary-rgb) / var(--alpha-10));
    padding: 0.08rem 0.35rem;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    font-size: 0.88em;
    color: var(--color-brand-primary);
  }

  .sg-footer {
    border-top: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-16));
    background: rgb(var(--white-rgb) / 0.38);
    color: var(--color-ink-primary);
  }

  .sg-site-platter {
    border-top: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-16));
    background: rgb(var(--white-rgb) / 0.26);
  }

  .sg-site-platter .c-region:first-child {
    padding-block-end: var(--space-sm);
  }

  .sg-site-platter > .site-wrapper {
    border-top: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
  }

  .sg-site-platter .c-sidebar {
    padding-block: 0;
  }

  .sg-site-platter .article-body {
    margin-bottom: 0;
  }

  .sg-site-platter .subnav {
    align-self: start;
  }

  .sg-scroll-scope {
    max-block-size: min(78vh, 48rem);
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-gutter: stable;
    border-radius: var(--radius-md);
    border: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
    background: var(--color-surface-base);
    box-shadow: var(--shadow-sm);
  }

  .sg-iframe-toolbar {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-xs);
  }

  .sg-iframe-toolbar label {
    margin: 0;
    font-size: var(--step--1);
    font-weight: var(--font-weight-bold);
    color: var(--color-ink-muted);
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .sg-iframe-breakpoint {
    min-inline-size: 12rem;
    width: auto;
    min-height: 2.4rem;
    padding-inline: 0.65rem 2rem;
    border-radius: var(--radius-sm);
    border: 1px solid var(--color-border-muted);
    background: var(--color-surface-base);
    color: var(--color-ink-primary);
  }

  .sg-iframe-current {
    margin: 0;
    font-size: var(--step--1);
    color: var(--color-ink-meta);
  }

  .sg-iframe-stage {
    --sg-preview-width: 100%;
    width: var(--sg-preview-width);
    min-width: min(20rem, 100%);
    margin-inline: auto;
    resize: horizontal;
    overflow: hidden;
    border-inline: 1px solid rgb(var(--color-ink-absolute-rgb) / var(--alpha-10));
  }

  .sg-scroll-scope:focus-within {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
  }

  .sg-scroll-scope iframe {
    display: block;
    width: 100%;
    min-height: 56rem;
    border: 0;
    background: var(--color-surface-base);
  }

  .sg-iframe-stage--tall iframe {
    min-height: 72rem;
  }

  .sg-iframe-bleed {
    width: 100vw;
    margin-inline: calc(50% - 50vw);
    max-width: 100vw;
  }

  .sg-iframe-preview {
    background: var(--color-surface-base);
    font-family: var(--font-sans-alt);
  }

  .sg-iframe-preview .sg-preview-filler {
    padding-block: var(--space-xl);
  }

  .sg-iframe-preview .sg-preview-filler p {
    margin: 0;
    color: var(--color-ink-meta);
    font-size: var(--step-0);
  }

  @include vp-max($vp-md - 0.01rem) {
    .sg-guide__index {
      grid-template-columns: repeat(auto-fit, minmax(10.5rem, 1fr));
      gap: var(--space-2xs);
    }

    .sg-guide__index a {
      min-height: 2rem;
      padding: 0.35rem 0.55rem;
    }
  }
}
